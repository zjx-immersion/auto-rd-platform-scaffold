import type { PRD } from './types'

/**
 * PRD Mock数据
 */
export const prds: PRD[] = [
    {
        id: 'PRD-001',
        featureId: 'FEAT-001',
        version: 'V1.0',
        content: `# PRD: 斜列泊车场景

## 1. 特性概述
- 特性ID: FEAT-001
- 版本: V1.0
- 负责人: 张三
- 创建时间: 2026-01-20

## 2. 背景与目标

### 2.1 业务背景
用户在日常使用中经常遇到斜列式停车场，现有泊车功能仅支持垂直和平行泊车，无法满足斜列泊车需求。

### 2.2 用户需求
- 支持识别斜列车位
- 自动完成斜列泊车操作
- 提供泊车引导和安全提示

### 2.3 目标与价值
- 提升泊车场景覆盖率至95%
- 提升用户满意度
- 增强产品竞争力

## 3. 功能需求

### 3.1 功能概述
实现斜列式停车场景的自动泊车功能，包括车位识别、路径规划、车辆控制。

### 3.2 用户场景
1. 用户驾驶车辆进入斜列式停车场
2. 系统自动识别可用斜列车位
3. 用户选择目标车位
4. 系统自动完成泊车操作

### 3.3 功能详细描述
- 车位识别：识别斜列车位的角度、位置、尺寸
- 路径规划：计算最优泊车路径
- 车辆控制：控制方向盘、油门、刹车完成泊车

## 4. 非功能需求

### 4.1 性能要求
- 车位识别准确率 ≥ 98%
- 泊车成功率 ≥ 95%
- 泊车时间 ≤ 60秒

### 4.2 安全要求
- 实时障碍物检测
- 紧急制动功能
- 用户随时可接管

## 5. 验收标准
- AC1: 支持30°-60°角度的斜列车位识别
- AC2: 泊车成功率达到95%以上
- AC3: 泊车过程平顺，无急刹急转
- AC4: 提供清晰的HMI提示信息
`,
        createdAt: '2026-01-20',
        updatedAt: '2026-01-28'
    },
    {
        id: 'PRD-002',
        featureId: 'FEAT-006',
        version: 'V1.0',
        content: `# PRD: 弯道车道保持

## 1. 特性概述
- 特性ID: FEAT-006
- 版本: V1.0
- 负责人: 王五
- 创建时间: 2026-01-22

## 2. 背景与目标

### 2.1 业务背景
现有车道保持功能在弯道场景下表现不佳，容易出现车道偏离。

### 2.2 用户需求
- 弯道场景下保持车道居中
- 平顺的转向控制
- 适应不同曲率的弯道

## 3. 功能需求

### 3.1 功能概述
增强车道保持功能，支持弯道场景，提供平顺的转向控制。

### 3.2 用户场景
1. 车辆行驶在弯道上
2. 系统识别车道线和弯道曲率
3. 自动调整转向角度保持车道居中

## 4. 验收标准
- AC1: 支持曲率半径≥50m的弯道
- AC2: 车道保持偏差≤0.3m
- AC3: 转向平顺性评分≥8分（10分制）
`,
        createdAt: '2026-01-22',
        updatedAt: '2026-01-28'
    },
    // 新增PRD数据
    {
        id: 'PRD-003',
        featureId: 'FEAT-009',
        version: 'V2.0',
        content: `# PRD: 斜列车位识别与泊入
## 1. 特性概述
实现斜列车位的智能识别与自动泊入功能，支持30°-60°角度的斜列车位。
## 2. 功能需求
- 超声波+视觉融合识别斜列车位
- 自动规划泊车路径
- 平顺控制车辆泊入
## 3. 验收标准
- AC1: 识别准确率≥98%
- AC2: 泊车成功率≥95%
- AC3: 泊车时间≤60秒`,
        createdAt: '2026-01-28',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-004',
        featureId: 'FEAT-010',
        version: 'V2.0',
        content: `# PRD: 记忆泊车功能
## 1. 特性概述
实现记忆泊车功能，用户可保存常用泊车路线，系统自动完成泊车。
## 2. 功能需求
- 学习并记忆泊车路线
- 自动识别记忆场景
- 一键启动记忆泊车
## 3. 验收标准
- AC1: 支持保存≥5条泊车路线
- AC2: 场景识别准确率≥90%
- AC3: 记忆泊车成功率≥90%`,
        createdAt: '2026-01-28',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-005',
        featureId: 'FEAT-011',
        version: 'V2.0',
        content: `# PRD: 多层停车场导航泊车
## 1. 特性概述
实现多层停车场场景下的导航泊车功能，包括楼层识别、路径导航。
## 2. 功能需求
- 识别停车场楼层
- 规划楼层间导航路径
- 自动寻找空闲车位
## 3. 验收标准
- AC1: 楼层识别准确率≥95%
- AC2: 支持≤5层停车场
- AC3: 空闲车位识别准确率≥90%`,
        createdAt: '2026-01-28',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-006',
        featureId: 'FEAT-012',
        version: 'V1.0',
        content: `# PRD: 自动变道功能
## 1. 特性概述
实现高速公路场景下的自动变道功能，包括变道时机判断、安全检测。
## 2. 功能需求
- 识别变道时机
- 检测盲区车辆
- 平顺完成变道
## 3. 验收标准
- AC1: 变道成功率≥95%
- AC2: 变道时间≤5秒
- AC3: 平顺性评分≥8分`,
        createdAt: '2026-01-29',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-007',
        featureId: 'FEAT-013',
        version: 'V1.0',
        content: `# PRD: 智能上下匝道
## 1. 特性概述
实现高速公路匝道场景的智能驾驶，包括匝道识别、速度控制。
## 2. 功能需求
- 识别匝道入口/出口
- 自动调整车速
- 平顺进出匝道
## 3. 验收标准
- AC1: 匝道识别准确率≥98%
- AC2: 速度控制平顺性≥8分
- AC3: 成功率≥95%`,
        createdAt: '2026-01-29',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-008',
        featureId: 'FEAT-014',
        version: 'V1.0',
        content: `# PRD: 多轮对话引擎
## 1. 特性概述
实现多轮对话功能，支持上下文理解和连续对话。
## 2. 功能需求
- 上下文记忆
- 意图理解
- 自然语言生成
## 3. 验收标准
- AC1: 支持≥5轮连续对话
- AC2: 意图识别准确率≥90%
- AC3: 响应时间≤2秒`,
        createdAt: '2026-01-30',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-009',
        featureId: 'FEAT-015',
        version: 'V1.0',
        content: `# PRD: 场景理解与推荐
## 1. 特性概述
实现场景智能理解和个性化推荐功能。
## 2. 功能需求
- 识别用户场景
- 分析用户偏好
- 智能推荐服务
## 3. 验收标准
- AC1: 场景识别准确率≥85%
- AC2: 推荐接受率≥60%
- AC3: 响应时间≤3秒`,
        createdAt: '2026-01-30',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-010',
        featureId: 'FEAT-016',
        version: 'V1.0',
        content: `# PRD: 情感识别与反馈
## 1. 特性概述
实现用户情感识别和情感化反馈功能。
## 2. 功能需求
- 语音情感识别
- 表情识别
- 情感化语音反馈
## 3. 验收标准
- AC1: 情感识别准确率≥80%
- AC2: 反馈自然度≥7分
- AC3: 响应时间≤2秒`,
        createdAt: '2026-01-30',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-011',
        featureId: 'FEAT-017',
        version: 'V1.0',
        content: `# PRD: 氛围灯智能联动
## 1. 特性概述
实现氛围灯与驾驶场景、音乐、语音的智能联动。
## 2. 功能需求
- 场景识别联动
- 音乐节奏联动
- 语音交互联动
## 3. 验收标准
- AC1: 支持≥10种场景模式
- AC2: 联动延迟≤500ms
- AC3: 用户满意度≥8分`,
        createdAt: '2026-01-31',
        updatedAt: '2026-02-01'
    },
    {
        id: 'PRD-012',
        featureId: 'FEAT-018',
        version: 'V1.0',
        content: `# PRD: 多感官体验系统
## 1. 特性概述
整合视觉、听觉、触觉、嗅觉的多感官体验系统。
## 2. 功能需求
- 氛围灯+音效联动
- 座椅按摩+香氛联动
- 场景化体验模式
## 3. 验收标准
- AC1: 支持≥5种体验模式
- AC2: 联动协调性≥8分
- AC3: 用户满意度≥8分`,
        createdAt: '2026-01-31',
        updatedAt: '2026-02-01'
    }
]

export const getPRDByFeatureId = (featureId: string): PRD | undefined => {
    return prds.find(prd => prd.featureId === featureId)
}

export const createPRD = (featureId: string): PRD => {
    const newPRD: PRD = {
        id: `PRD-${String(prds.length + 1).padStart(3, '0')}`,
        featureId,
        version: 'V1.0',
        content: `# PRD: 新建PRD文档

## 1. 特性概述
请填写特性概述...

## 2. 背景与目标
请填写背景与目标...

## 3. 功能需求
请填写功能需求...

## 4. 验收标准
请填写验收标准...
`,
        createdAt: new Date().toISOString().split('T')[0],
        updatedAt: new Date().toISOString().split('T')[0]
    }

    prds.push(newPRD)
    return newPRD
}

export const updatePRD = (featureId: string, content: string): void => {
    const prd = getPRDByFeatureId(featureId)
    if (prd) {
        prd.content = content
        prd.updatedAt = new Date().toISOString().split('T')[0]
    }
}
